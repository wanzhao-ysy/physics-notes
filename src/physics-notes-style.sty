\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{physics-notes-style}
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% physics-notes-style 调用的宏包
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% 基础宏包
\RequirePackage{xcolor}
\RequirePackage{amsmath,amsthm,bm}
\RequirePackage{amssymb,latexsym,textcomp,euscript,euscript,yhmath}
\RequirePackage{derivative,fixdif}
%
% 物理专用宏包
\RequirePackage{siunitx}
\RequirePackage{physics2}
%
% 图形和布局
\RequirePackage{graphicx,float,caption,subcaption}
\RequirePackage{tikz}
\usetikzlibrary{arrows.meta,angles,quotes,calc}
\RequirePackage[
  inner=2cm,
  outer=1.5cm,
  top=2cm,
  bottom=2cm,
  marginparwidth=2cm,
  marginparsep=0.4cm,
  %includefoot,
  heightrounded
  ]{geometry}
\RequirePackage{multicol}
% 
% 中文支持
\RequirePackage[UTF8,scheme=chinese, heading=true]{ctex}
%
% 页眉页脚设定 (奇偶页显示章节和页码)
\addtolength{\headheight}{1.6pt}
\newdimen\headwidth \headwidth\textwidth
\newdimen\headrulewidth \headrulewidth=0.4pt
\def\ps@fancy{%
  \let\@oddfoot\@empty\let\@evenfoot\@empty
  \def\@evenhead{\vbox to \headheight{%
    \hb@xt@\headwidth{\bfseries\thepage\hfil\leftmark}%
    \vss\hrule\@height\headrulewidth}}%
  \def\@oddhead{\vbox to \headheight{%
    \hb@xt@\headwidth{\bfseries\rightmark\hfil\thepage}%
    \vss\hrule\@height\headrulewidth}}%
  \let\@mkboth\markboth
  \def\chaptermark##1{\markboth{\if@mainmatter\CTEXthechapter\fi\quad ##1}{}}%
  \def\sectionmark##1{\markright{\S\thesection\quad ##1}}%
}
% 应用页眉样式
\pagestyle{fancy}
%
%
% tcolorbox 及其库
\RequirePackage{tcolorbox}
\tcbuselibrary{skins,breakable,theorems}
%
% 索引工具
\RequirePackage{makeidx}
%
% 字体问题处理
% 等待处理
%
% 图、表、公式编号
\numberwithin{figure}{chapter}
\numberwithin{table}{chapter}
\numberwithin{equation}{chapter}
%
% 页面设置
%\raggedbottom
%
% 超链接支持
\RequirePackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=red,
    citecolor=red,
    urlcolor=red,
    bookmarksnumbered=true,
    pdfstartview=FitH
}
%
% 智能引用支持
\RequirePackage{cleveref}
%
% 书签支持
\RequirePackage{bookmark}
%
% ==========================================
% 物理笔记专用环境定义
% ==========================================
%
% 1. 定义环境
\newtcbtheorem[
  number within=section,
  Crefname={定理}{定理},
  crefname={定理}{定理}
  ]{definition}{定义}
{
    colback=blue!5!white,
    colframe=blue!75!black,
    fonttitle=\bfseries,
    breakable,
    enhanced,
    attach boxed title to top left={xshift=5mm, yshift=-2mm},
    boxed title style={colback=blue!75!black},
}{def}
%
% 2. 定律环境
\newtcbtheorem[
  number within=section,
  Crefname={定律}{定律},
  crefname={定律}{定律}
  ]{law}{定律}
{
    colback=green!5!white,
    colframe=green!75!black,
    fonttitle=\bfseries,
    breakable,
    enhanced,
    attach boxed title to top left={xshift=5mm, yshift=-2mm},
    boxed title style={colback=green!75!black},
}{law}
%
% 3. 定理环境
\newtcbtheorem[
  number within=section,
  Crefname={定理}{定理},
  crefname={定理}{定理}
  ]{theorem}{定理}
{
    colback=orange!5!white,
    colframe=orange!75!black,
    fonttitle=\bfseries,
    breakable,
    enhanced,
    attach boxed title to top left={xshift=5mm, yshift=-2mm},
    boxed title style={colback=orange!75!black},
}{theorem}
%
% 4. 注释环境
\newtcbtheorem[
  number within=section,
  Crefname={注释}{注释},
  crefname={注释}{注释}
  ]{note}{注释}
{
    colback=yellow!5!white,
    colframe=yellow!75!black,
    fonttitle=\bfseries,
    breakable,
    enhanced,
    attach boxed title to top left={xshift=5mm, yshift=-2mm},
    boxed title style={colback=yellow!75!black},
}{note}
%
% 5. 例环境
\newtcbtheorem[
  number within=section,
  Crefname={例}{例},
  crefname={例}{例}
  ]{example}{例}
{
    colback=red!5!white,
    colframe=red!75!black,
    fonttitle=\bfseries,
    breakable,
    enhanced,
    attach boxed title to top left={xshift=5mm, yshift=-2mm},
    boxed title style={colback=red!75!black},
}{example}
%
% 6. 示例环境
\newtcbtheorem[
  number within=section,
  Crefname={示例}{示例},
  crefname={示例}{示例}
  ]{illustration}{示例}
{
    colback=purple!5!white,
    colframe=purple!75!black,
    fonttitle=\bfseries,
    breakable,
    enhanced,
    attach boxed title to top left={xshift=5mm, yshift=-2mm},
    boxed title style={colback=purple!75!black},
}{illustration}
%
%==========================================
%
% 令 \cleardoublepage 的偶数页页眉页脚为空
\renewcommand{\cleardoublepage}
    {\clearpage\if@twoside \ifodd\c@page\else
    \hbox{}\thispagestyle{empty}\newpage\if@twocolumn\hbox{}\newpage\fi\fi\fi}
%
% 目录排版
\renewcommand\tableofcontents%
  {\chapter{\contentsname}%
  \@mkboth{\MakeUppercase\contentsname}{\MakeUppercase\contentsname}%
  \begin{multicols}{2}
    \@starttoc{toc}%
  \end{multicols}
}
%
% 每章最前的介绍内容环境 intro
\newenvironment{intro}
  {\begin{quote}\kaishu\color{gray}}%
  {\end{quote}\par\vspace*{2ex minus 1.5ex}}

\endinput
%